import{z as Ge,s as Oe,c as te,A as wt,r as ye,B as ce,o as kt,C as yt,n as ne,f as Ae,b as Qe}from"../chunks/scheduler.b8a490f1.js";import{ab as Mt,a0 as Nt,b3 as Ot,aZ as Tt,b7 as X,b8 as we,b5 as Fe,b9 as se,a_ as We,aP as Ce,aQ as De,ba as jt,bb as Pt,aX as Z,bc as Vt,aW as ge,aY as Et,aT as ve,aU as Gt,b1 as Te,bd as Lt,b2 as Yt,b6 as Ht}from"../chunks/user.2e12a8a7.js";import{S as Pe,i as Ve,e as w,s as V,c as k,a as E,f as G,d as _,n as d,g as N,h as m,q as F,v as Ee,r as J,w as Ie,k as oe,m as ae,o as ue,p as P,u as fe,t as A,b as B,j as x,E as ke,x as Le,C as be,l as ze,F as Ye,z as re,y as de}from"../chunks/index.6eacc56a.js";import{w as Se}from"../chunks/singletons.df133e99.js";import{b as Rt}from"../chunks/windowWidth.bd7fe143.js";import{L as At}from"../chunks/Login.a784f5b5.js";const It=20,Bt=async({params:t})=>{async function e(){const r=Ge(Tt).find(s=>s.id===t.id);if(r)return r;const n=await Mt(Nt(Ot,t.id));if(n.exists)return{id:n.id,...n.data()}}return{dbList:e()}},Wl=Object.freeze(Object.defineProperty({__proto__:null,load:Bt},Symbol.toStringTag,{value:"Module"})),Ut={entry:void 0,width:void 0,moveIndex:void 0,moveTier:void 0,lastMoveIndex:void 0,lastMoveTier:void 0,measurements:{mouseY:0,mouseX:0,topDistance:0,leftDistance:0},fromSearch:!1},_e=Se(Ut);function Ft(t,e,l=!1){zt(void 0),_e.update(r=>{r.measurements.mouseY=t.clientY,r.measurements.mouseX=t.clientX;const n=t.target.getBoundingClientRect();r.measurements.topDistance=n.y-r.measurements.mouseY,r.measurements.leftDistance=n.x-r.measurements.mouseX,r.entry=e,r.width=n.width,r.fromSearch=l;const s=document.createElement("canvas"),u=t.dataTransfer;if(!u)throw new Error("Unexpected error");return u.setDragImage(s,0,0),s.remove(),r})}let He=!0,Xe=!1,qe=!1;function Xt(t){He=!0,(qe||Xe)&&(He=!1,Dt()),_e.update(e=>(e.measurements.mouseY=t.clientY,e.measurements.mouseX=t.clientX,Xe=t.clientY<window.innerHeight/10,qe=t.clientY>window.innerHeight-window.innerHeight/10,e))}function qt(t){_e.update(e=>(e.moveIndex=t,e))}function Jt(t){_e.update(e=>(e.moveTier=t,e))}function Wt(){He=!0,_e.update(t=>(t.entry=void 0,t.moveIndex=void 0,t.moveTier=void 0,t))}function zt(t){_e.update(e=>(e.lastMoveIndex=t,e))}function Qt(t){_e.update(e=>(e.entry&&(e.lastMoveTier=t),e))}function Dt(){if(He)return;const t=window.scrollY;window.scrollTo(0,t+(Xe?-1:qe?1:0)),setTimeout(Dt,40)}const ee={startDrag:Ft,drag:Xt,dragOver:qt,dragOverTier:Jt,dragEnd:Wt,setLastMove:zt,setLastTier:Qt},je=Se(""),Ne=Se([]),Me=Se([]),Re=Se(),Ze=Se();async function Zt(t,e=It,l=0){const r=we.getSnippet(t),s=await(await fetch(`/api/${r}/search/${Ge(je)}?limit=${e}&offset=${l}`)).json(),{results:u}=s;Re.set({count:s.count,limit:s.limit,offset:s.offset}),Ne.set(Array.isArray(u)?u:[]);const a=Ge(Fe);Me.set(u.filter(i=>!a.find(o=>o.title===i.title)))}let Be=!1,Ke="";async function St(t,e=It,l=0,r=300){const n=Ge(je);Be||!n||(Be=!0,Ke=n,await Zt(t,e,l),setTimeout(()=>{Be=!1,Ke!==Ge(je)&&St(t,e,l,r)},r))}function Kt(t){Me.update(e=>e.filter(l=>!t.find(r=>X.getId(r)===X.getId(l))))}const me={scheduleSearch:St,filter:Kt},Je=Se(1);function $t(t){return new Date(t).getFullYear()}function xt(t){switch(new Date(t).getMonth()){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";default:return"December"}}function el(t){return new Date(t).getDate()}const Ue={getYear:$t,getMonth:xt,getDay:el};function tl(t,e){return`${e.release_date&&t.type!==se.Songs?t.type!==se.Books?Ue.getDay(e.release_date)+" "+Ue.getMonth(e.release_date)+" "+Ue.getYear(e.release_date):e.release_date:""}${e.release_date&&t.type!==se.Songs&&("authors"in e||"artists"in e)?" - ":""}${"authors"in e?e.authors.join(", "):"artists"in e?e.artists.join(", "):""}`}const he={get:tl};function $e(t,e,l){const r=t.slice();return r[25]=e[l],r[27]=l,r}function ll(t){let e,l=t[1].name+"",r;return{c(){e=w("h2"),r=A(l),this.h()},l(n){e=k(n,"H2",{class:!0});var s=E(e);r=B(s,l),s.forEach(_),this.h()},h(){d(e,"class","text-3xl h-10 w-full px-1 font-bold leading-normal")},m(n,s){N(n,e,s),m(e,r)},p(n,s){s&2&&l!==(l=n[1].name+"")&&x(r,l)},d(n){n&&_(e)}}}function rl(t){let e,l,r,n;return{c(){e=w("input"),this.h()},l(s){e=k(s,"INPUT",{type:!0,spellcheck:!0,class:!0}),this.h()},h(){d(e,"type","text"),d(e,"spellcheck","false"),d(e,"class","bg-transparent outline-none border-none text-3xl h-10 w-full px-1 font-bold leading-normal focus:bg-zinc-600/20 transition rounded-md"),e.value=l=t[1].name},m(s,u){N(s,e,u),r||(n=P(e,"input",t[13]),r=!0)},p(s,u){u&2&&l!==(l=s[1].name)&&e.value!==l&&(e.value=l)},d(s){s&&_(e),r=!1,n()}}}function xe(t){let e,l,r,n,s,u,a,i=t[4]&&t[4]>Ce.sm&&et(t);return n=new De({props:{icon:jt,class:"text-xl text-rose-800"}}),{c(){e=w("div"),i&&i.c(),l=V(),r=w("button"),oe(n.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var f=E(e);i&&i.l(f),l=G(f),r=k(f,"BUTTON",{class:!0});var g=E(r);ae(n.$$.fragment,g),g.forEach(_),f.forEach(_),this.h()},h(){d(r,"class","flex items-center justify-center p-1 w-10 aspect-square hover:bg-zinc-600/20 transition rounded-md"),d(e,"class","flex gap-2")},m(o,f){N(o,e,f),i&&i.m(e,null),m(e,l),m(e,r),ue(n,r,null),s=!0,u||(a=P(r,"click",t[16]),u=!0)},p(o,f){o[4]&&o[4]>Ce.sm?i?(i.p(o,f),f&16&&F(i,1)):(i=et(o),i.c(),F(i,1),i.m(e,l)):i&&(Ee(),J(i,1,1,()=>{i=null}),Ie())},i(o){s||(F(i),F(n.$$.fragment,o),s=!0)},o(o){J(i),J(n.$$.fragment,o),s=!1},d(o){o&&_(e),i&&i.d(),fe(n),u=!1,a()}}}function et(t){let e,l,r,n,s,u,a,i;return l=new De({props:{icon:Pt,class:"text-xl "+(t[1].style===Z.Column?"text-white":"text-zinc-500")}}),s=new De({props:{icon:Vt,class:"text-xl "+(t[1].style===Z.Grid?"text-white":"text-zinc-500")}}),{c(){e=w("button"),oe(l.$$.fragment),r=V(),n=w("button"),oe(s.$$.fragment),this.h()},l(o){e=k(o,"BUTTON",{class:!0});var f=E(e);ae(l.$$.fragment,f),f.forEach(_),r=G(o),n=k(o,"BUTTON",{class:!0});var g=E(n);ae(s.$$.fragment,g),g.forEach(_),this.h()},h(){d(e,"class","flex items-center justify-center p-1 w-10 aspect-square hover:bg-zinc-600/20 transition rounded-md"),d(n,"class","flex items-center justify-center p-1 w-10 aspect-square hover:bg-zinc-600/20 transition rounded-md")},m(o,f){N(o,e,f),ue(l,e,null),N(o,r,f),N(o,n,f),ue(s,n,null),u=!0,a||(i=[P(e,"click",t[14]),P(n,"click",t[15])],a=!0)},p(o,f){const g={};f&2&&(g.class="text-xl "+(o[1].style===Z.Column?"text-white":"text-zinc-500")),l.$set(g);const v={};f&2&&(v.class="text-xl "+(o[1].style===Z.Grid?"text-white":"text-zinc-500")),s.$set(v)},i(o){u||(F(l.$$.fragment,o),F(s.$$.fragment,o),u=!0)},o(o){J(l.$$.fragment,o),J(s.$$.fragment,o),u=!1},d(o){o&&(_(e),_(r),_(n)),fe(l),fe(s),a=!1,ye(i)}}}function sl(t){let e,l,r,n,s,u=ve(t[2]),a=[];for(let i=0;i<u.length;i+=1)a[i]=tt($e(t,u,i));return{c(){e=w("div");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0,style:!0});var o=E(e);for(let f=0;f<a.length;f+=1)a[f].l(o);o.forEach(_),this.h()},h(){d(e,"class",l="relative "+(t[1].style===Z.Grid&&t[3]>2?"grid grid-flow-row":t[1].style===Z.Grid?"grid grid-flow-col":t[1].style===Z.Column?"flex flex-col":"")),d(e,"style",r=t[3]>2?`grid-template-columns: repeat(${t[3]}, ${100/t[3]}%);`:`grid-template-rows: repeat(${t[6]}, minmax(0, 1fr)); 
					grid-template-columns: repeat(${t[3]}, ${100/t[3]}%);`)},m(i,o){N(i,e,o);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);n||(s=P(e,"dragover",ke(t[24])),n=!0)},p(i,o){if(o&1966){u=ve(i[2]);let f;for(f=0;f<u.length;f+=1){const g=$e(i,u,f);a[f]?a[f].p(g,o):(a[f]=tt(g),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=u.length}o&10&&l!==(l="relative "+(i[1].style===Z.Grid&&i[3]>2?"grid grid-flow-row":i[1].style===Z.Grid?"grid grid-flow-col":i[1].style===Z.Column?"flex flex-col":""))&&d(e,"class",l),o&72&&r!==(r=i[3]>2?`grid-template-columns: repeat(${i[3]}, ${100/i[3]}%);`:`grid-template-rows: repeat(${i[6]}, minmax(0, 1fr)); 
					grid-template-columns: repeat(${i[3]}, ${100/i[3]}%);`)&&d(e,"style",r)},d(i){i&&_(e),Le(a,i),n=!1,s()}}}function nl(t){let e,l,r=we.getSnippet(t[1].type)+"",n,s,u,a;return{c(){e=w("p"),l=A("Click on a searched "),n=A(r),s=A(" to add it to the list"),this.h()},l(i){e=k(i,"P",{class:!0});var o=E(e);l=B(o,"Click on a searched "),n=B(o,r),s=B(o," to add it to the list"),o.forEach(_),this.h()},h(){d(e,"class","text-zinc-400 px-1 py-2")},m(i,o){N(i,e,o),m(e,l),m(e,n),m(e,s),u||(a=P(e,"dragover",t[17]),u=!0)},p(i,o){o&2&&r!==(r=we.getSnippet(i[1].type)+"")&&x(n,r)},d(i){i&&_(e),u=!1,a()}}}function tt(t){let e,l,r,n,s,u,a,i=t[27]+1+"",o,f,g,v,h=t[25].title+"",c,b,z,S,H=he.get(t[1],t[25])+"",T,y,p,D,R;function Y(){return t[18](t[27])}function L(...j){return t[20](t[25],...j)}function q(...j){return t[22](t[27],...j)}function le(){return t[23](t[25])}return{c(){e=w("div"),l=w("img"),n=V(),s=w("div"),u=w("p"),a=A("#"),o=A(i),g=V(),v=w("h2"),c=A(h),z=V(),S=w("p"),T=A(H),y=V(),this.h()},l(j){e=k(j,"DIV",{draggable:!0,class:!0});var M=E(e);l=k(M,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),n=G(M),s=k(M,"DIV",{class:!0});var U=E(s);u=k(U,"P",{class:!0});var O=E(u);a=B(O,"#"),o=B(O,i),O.forEach(_),g=G(U),v=k(U,"H2",{class:!0});var W=E(v);c=B(W,h),W.forEach(_),z=G(U),S=k(U,"P",{class:!0});var Q=E(S);T=B(Q,H),Q.forEach(_),U.forEach(_),y=G(M),M.forEach(_),this.h()},h(){ce(l.src,r=t[25].poster_url)||d(l,"src",r),d(l,"alt",""),d(l,"class","h-36 aspect-[2/3] object-cover rounded-sm"),d(l,"draggable","false"),d(u,"class",f=t[1].style!==Z.Grid?"text-2xl":t[3]>3?"text-xl":"text-2xl"),d(v,"class",b="font-semibold line-clamp-3 "+(t[1].style!==Z.Grid?"text-3xl":t[3]>4?"text-sm":t[3]>3?"text-lg":t[3]>2?"text-xl":"text-3xl")),d(S,"class","text-xs text-zinc-400 overflow-hidden whitespace-nowrap overflow-ellipsis"),d(s,"class","flex flex-col gap-1 max-h-36 overflow-hidden"),d(e,"draggable",t[7]),d(e,"class",p="relative flex items-center "+(t[1].style!==Z.Grid?"gap-6":t[3]>3?"gap-3":t[3]>2?"gap-4":"gap-6")+" transition-[background-color] "+(t[7]?"cursor-grab":"")+" p-1 "+(t[1].style!==Z.Grid?"pr-4":t[3]>3?"pr-1":t[3]>2?"pr-2":"pr-4")+" rounded-md "+(t[8].entry&&X.getId(t[8].entry)===X.getId(t[25])?"opacity-0":"")+" "+(t[5]===t[27]?"bg-zinc-600/20":""))},m(j,M){N(j,e,M),m(e,l),m(e,n),m(e,s),m(s,u),m(u,a),m(u,o),m(s,g),m(s,v),m(v,c),m(s,z),m(s,S),m(S,T),m(e,y),D||(R=[P(e,"mouseenter",Y),P(e,"mouseleave",t[19]),P(e,"dragstart",L),P(e,"drag",be(t[21])),P(e,"dragover",be(ke(q))),P(e,"dragend",ee.dragEnd),P(e,"contextmenu",ke(le))],D=!0)},p(j,M){t=j,M&4&&!ce(l.src,r=t[25].poster_url)&&d(l,"src",r),M&10&&f!==(f=t[1].style!==Z.Grid?"text-2xl":t[3]>3?"text-xl":"text-2xl")&&d(u,"class",f),M&4&&h!==(h=t[25].title+"")&&x(c,h),M&10&&b!==(b="font-semibold line-clamp-3 "+(t[1].style!==Z.Grid?"text-3xl":t[3]>4?"text-sm":t[3]>3?"text-lg":t[3]>2?"text-xl":"text-3xl"))&&d(v,"class",b),M&6&&H!==(H=he.get(t[1],t[25])+"")&&x(T,H),M&128&&d(e,"draggable",t[7]),M&430&&p!==(p="relative flex items-center "+(t[1].style!==Z.Grid?"gap-6":t[3]>3?"gap-3":t[3]>2?"gap-4":"gap-6")+" transition-[background-color] "+(t[7]?"cursor-grab":"")+" p-1 "+(t[1].style!==Z.Grid?"pr-4":t[3]>3?"pr-1":t[3]>2?"pr-2":"pr-4")+" rounded-md "+(t[8].entry&&X.getId(t[8].entry)===X.getId(t[25])?"opacity-0":"")+" "+(t[5]===t[27]?"bg-zinc-600/20":""))&&d(e,"class",p)},d(j){j&&_(e),D=!1,ye(R)}}}function il(t){let e,l,r,n,s;function u(h,c){return h[7]?rl:ll}let a=u(t),i=a(t),o=t[7]&&xe(t);function f(h,c){return h[2].length===0?nl:sl}let g=f(t),v=g(t);return{c(){e=w("section"),l=w("div"),i.c(),r=V(),o&&o.c(),n=V(),v.c(),this.h()},l(h){e=k(h,"SECTION",{class:!0});var c=E(e);l=k(c,"DIV",{class:!0});var b=E(l);i.l(b),r=G(b),o&&o.l(b),b.forEach(_),n=G(c),v.l(c),c.forEach(_),this.h()},h(){d(l,"class","flex justify-between gap-2"),d(e,"class","flex flex-col w-full 2xl:w-3/4 gap-4 h-fit bg-zinc-700/50 p-4 rounded-md border border-zinc-500/20 shadow-xl backdrop-blur-sm")},m(h,c){N(h,e,c),m(e,l),i.m(l,null),m(l,r),o&&o.m(l,null),m(e,n),v.m(e,null),s=!0},p(h,[c]){a===(a=u(h))&&i?i.p(h,c):(i.d(1),i=a(h),i&&(i.c(),i.m(l,r))),h[7]?o?(o.p(h,c),c&128&&F(o,1)):(o=xe(h),o.c(),F(o,1),o.m(l,null)):o&&(Ee(),J(o,1,1,()=>{o=null}),Ie()),g===(g=f(h))&&v?v.p(h,c):(v.d(1),v=g(h),v&&(v.c(),v.m(e,null)))},i(h){s||(F(o),s=!0)},o(h){J(o),s=!1},d(h){h&&_(e),i.d(),o&&o.d(),v.d()}}}function ol(t,e,l){let r,n,s,u,a,i,o,f,g;te(t,Je,j=>l(3,u=j)),te(t,Rt,j=>l(4,a=j)),te(t,We,j=>l(12,i=j)),te(t,_e,j=>l(8,o=j)),te(t,Ne,j=>l(9,f=j)),te(t,Re,j=>l(10,g=j));let{lists:v}=e,{list:h}=e,{entries:c}=e,b;const z=async j=>{await ge.updateName(h.id,j.target.value)},S=async()=>{await ge.updateStyle(h.id,Z.Column)},H=async()=>{await ge.updateStyle(h.id,Z.Grid)},T=async()=>{if(confirm("Are you sure you want to delete this list?")){const j=v.findIndex(U=>U.id===h.id);if(j===-1)return;const M=v.length>1?v[j-1]:null;await ge.remove(h.id),await Et(M?`/${M.id}`:"/")}},y=()=>{ee.dragOver(c.length)},p=j=>{l(5,b=j)},D=()=>{l(5,b=void 0)},R=(j,M)=>{r&&(l(5,b=void 0),ee.startDrag(M,j))},Y=j=>{ee.drag(j)},L=(j,M)=>{const U=M.dataTransfer;U&&(U.dropEffect="move",ee.dragOver(j))},q=async j=>{X.remove(X.getId(j)),f.length&&g&&await me.scheduleSearch(h.type,g.limit,g.offset)},le=j=>{const M=j.dataTransfer;M&&(M.dropEffect="move",ee.dragOver(c.length))};return t.$$set=j=>{"lists"in j&&l(0,v=j.lists),"list"in j&&l(1,h=j.list),"entries"in j&&l(2,c=j.entries)},t.$$.update=()=>{t.$$.dirty&4098&&l(7,r=i&&i.uid===h.owner_id),t.$$.dirty&4&&l(11,n=Math.min(Math.ceil(c.length/5),5)),t.$$.dirty&2064&&wt(Je,u=a===Ce["2xl"]?n:a===Ce.xl?Math.min(n,4):a===Ce.lg?Math.min(n,3):a===Ce.md?Math.min(n,2):1,u),t.$$.dirty&12&&l(6,s=u>2?Math.min(c.length,5):Math.ceil(c.length/u))},[v,h,c,u,a,b,s,r,o,f,g,n,i,z,S,H,T,y,p,D,R,Y,L,q,le]}class al extends Pe{constructor(e){super(),Ve(this,e,ol,il,Oe,{lists:0,list:1,entries:2})}}function lt(t,e,l){const r=t.slice();return r[32]=e[l],r[34]=l,r}function rt(t,e,l){const r=t.slice();return r[35]=e[l],r[37]=l,r}function ul(t){let e,l=t[2].name+"",r;return{c(){e=w("h2"),r=A(l),this.h()},l(n){e=k(n,"H2",{class:!0});var s=E(e);r=B(s,l),s.forEach(_),this.h()},h(){d(e,"class","text-3xl h-10 w-full px-1 font-bold leading-normal")},m(n,s){N(n,e,s),m(e,r)},p(n,s){s[0]&4&&l!==(l=n[2].name+"")&&x(r,l)},d(n){n&&_(e)}}}function fl(t){let e,l,r,n;return{c(){e=w("input"),this.h()},l(s){e=k(s,"INPUT",{type:!0,spellcheck:!0,class:!0}),this.h()},h(){d(e,"type","text"),d(e,"spellcheck","false"),d(e,"class","bg-transparent outline-none border-none text-3xl h-10 w-full px-1 font-bold leading-normal focus:bg-zinc-600/20 transition rounded-md"),e.value=l=t[2].name},m(s,u){N(s,e,u),r||(n=P(e,"input",t[15]),r=!0)},p(s,u){u[0]&4&&l!==(l=s[2].name)&&e.value!==l&&(e.value=l)},d(s){s&&_(e),r=!1,n()}}}function st(t){let e,l,r,n,s,u;return r=new De({props:{icon:jt,class:"text-xl text-rose-800"}}),{c(){e=w("div"),l=w("button"),oe(r.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var i=E(e);l=k(i,"BUTTON",{class:!0});var o=E(l);ae(r.$$.fragment,o),o.forEach(_),i.forEach(_),this.h()},h(){d(l,"class","flex items-center justify-center p-1 w-10 aspect-square hover:bg-zinc-600/20 transition rounded-md"),d(e,"class","flex gap-2")},m(a,i){N(a,e,i),m(e,l),ue(r,l,null),n=!0,s||(u=P(l,"click",t[16]),s=!0)},p:ne,i(a){n||(F(r.$$.fragment,a),n=!0)},o(a){J(r.$$.fragment,a),n=!1},d(a){a&&_(e),fe(r),s=!1,u()}}}function cl(t){let e,l,r,n=t[0].length===0&&nt(t),s=ve(t[3]),u=[];for(let a=0;a<s.length;a+=1)u[a]=ot(lt(t,s,a));return{c(){n&&n.c(),e=V(),l=w("div"),r=w("div");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){n&&n.l(a),e=G(a),l=k(a,"DIV",{class:!0});var i=E(l);r=k(i,"DIV",{class:!0,style:!0});var o=E(r);for(let f=0;f<u.length;f+=1)u[f].l(o);o.forEach(_),i.forEach(_),this.h()},h(){d(r,"class","grid rounded-md overflow-hidden bg-zinc-700/50"),re(r,"grid-template-columns","9% 1fr"),d(l,"class","relative flex flex-col")},m(a,i){n&&n.m(a,i),N(a,e,i),N(a,l,i),m(l,r);for(let o=0;o<u.length;o+=1)u[o]&&u[o].m(r,null)},p(a,i){if(a[0].length===0?n?n.p(a,i):(n=nt(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),i[0]&989){s=ve(a[3]);let o;for(o=0;o<s.length;o+=1){const f=lt(a,s,o);u[o]?u[o].p(f,i):(u[o]=ot(f),u[o].c(),u[o].m(r,null))}for(;o<u.length;o+=1)u[o].d(1);u.length=s.length}},d(a){a&&(_(e),_(l)),n&&n.d(a),Le(u,a)}}}function dl(t){let e,l,r=we.getSnippet(t[2].type)+"",n;return{c(){e=w("p"),l=A("Create a tier to start adding "),n=A(r),this.h()},l(s){e=k(s,"P",{class:!0});var u=E(e);l=B(u,"Create a tier to start adding "),n=B(u,r),u.forEach(_),this.h()},h(){d(e,"class","text-zinc-400 px-1 py-2")},m(s,u){N(s,e,u),m(e,l),m(e,n)},p(s,u){u[0]&4&&r!==(r=we.getSnippet(s[2].type)+"")&&x(n,r)},d(s){s&&_(e)}}}function nt(t){let e,l,r=we.getSnippet(t[2].type)+"",n,s,u,a;return{c(){e=w("p"),l=A("Click on a searched "),n=A(r),s=A(" to add it to the list"),this.h()},l(i){e=k(i,"P",{class:!0});var o=E(e);l=B(o,"Click on a searched "),n=B(o,r),s=B(o," to add it to the list"),o.forEach(_),this.h()},h(){d(e,"class","text-zinc-400 px-1 py-2")},m(i,o){N(i,e,o),m(e,l),m(e,n),m(e,s),u||(a=P(e,"dragover",t[17]),u=!0)},p(i,o){o[0]&4&&r!==(r=we.getSnippet(i[2].type)+"")&&x(n,r)},d(i){i&&_(e),u=!1,a()}}}function hl(t){let e,l=t[32]+"",r;return{c(){e=w("h2"),r=A(l),this.h()},l(n){e=k(n,"H2",{class:!0});var s=E(e);r=B(s,l),s.forEach(_),this.h()},h(){d(e,"class","flex items-center justify-center w-full h-full line-clamp-5 overflow-ellipsis leading-normal text-center")},m(n,s){N(n,e,s),m(e,r)},p(n,s){s[0]&8&&l!==(l=n[32]+"")&&x(r,l)},d(n){n&&_(e)}}}function pl(t){let e,l,r=t[32]+"",n,s,u;function a(...o){return t[18](t[32],...o)}function i(...o){return t[19](t[32],...o)}return{c(){e=w("div"),l=w("p"),n=A(r),this.h()},l(o){e=k(o,"DIV",{contenteditable:!0,spellcheck:!0,class:!0});var f=E(e);l=k(f,"P",{class:!0});var g=E(l);n=B(g,r),g.forEach(_),f.forEach(_),this.h()},h(){d(l,"class","line-clamp-5 overflow-ellipsis leading-normal text-center align-middle"),d(e,"contenteditable","true"),d(e,"spellcheck","false"),d(e,"class","outline-none resize-none border-none w-full h-full bg-transparent flex items-center justify-center overflow-hidden")},m(o,f){N(o,e,f),m(e,l),m(l,n),s||(u=[P(e,"click",be(t[14])),P(e,"input",a),P(e,"focusout",i)],s=!0)},p(o,f){t=o,f[0]&8&&r!==(r=t[32]+"")&&x(n,r)},d(o){o&&_(e),s=!1,ye(u)}}}function it(t){let e,l,r,n,s,u,a=t[35].title+"",i,o,f,g=he.get(t[2],t[35])+"",v,h,c,b,z;function S(){return t[20](t[37])}function H(...p){return t[22](t[35],...p)}function T(...p){return t[24](t[32],t[37],...p)}function y(){return t[25](t[35])}return{c(){e=w("div"),l=w("img"),n=V(),s=w("div"),u=w("h2"),i=A(a),o=V(),f=w("p"),v=A(g),h=V(),this.h()},l(p){e=k(p,"DIV",{draggable:!0,class:!0});var D=E(e);l=k(D,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),n=G(D),s=k(D,"DIV",{class:!0});var R=E(s);u=k(R,"H2",{class:!0});var Y=E(u);i=B(Y,a),Y.forEach(_),o=G(R),f=k(R,"P",{class:!0});var L=E(f);v=B(L,g),L.forEach(_),R.forEach(_),h=G(D),D.forEach(_),this.h()},h(){ce(l.src,r=t[35].poster_url)||d(l,"src",r),d(l,"alt",""),d(l,"class","h-36 aspect-[2/3] object-cover rounded-sm"),d(l,"draggable","false"),d(u,"class","font-semibold line-clamp-3 text-xl"),d(f,"class","text-xs text-zinc-400 overflow-hidden whitespace-nowrap overflow-ellipsis"),d(s,"class","flex flex-col gap-1 max-h-36 overflow-hidden"),d(e,"draggable",t[6]),d(e,"class",c=(t[35].tier===t[32]?"flex":"hidden")+" relative items-center gap-3 transition-[background-color] "+(t[6]?"cursor-grab":"")+" p-1 pr-4 rounded-md "+(t[9].entry&&X.getId(t[9].entry)===X.getId(t[35])?"opacity-0":"")+" "+(t[4]===t[37]?"bg-zinc-600/20":""))},m(p,D){N(p,e,D),m(e,l),m(e,n),m(e,s),m(s,u),m(u,i),m(s,o),m(s,f),m(f,v),m(e,h),b||(z=[P(e,"mouseenter",S),P(e,"mouseleave",t[21]),P(e,"dragstart",H),P(e,"drag",be(t[23])),P(e,"dragover",be(ke(T))),P(e,"dragend",ee.dragEnd),P(e,"contextmenu",be(ke(y)))],b=!0)},p(p,D){t=p,D[0]&1&&!ce(l.src,r=t[35].poster_url)&&d(l,"src",r),D[0]&1&&a!==(a=t[35].title+"")&&x(i,a),D[0]&5&&g!==(g=he.get(t[2],t[35])+"")&&x(v,g),D[0]&64&&d(e,"draggable",t[6]),D[0]&601&&c!==(c=(t[35].tier===t[32]?"flex":"hidden")+" relative items-center gap-3 transition-[background-color] "+(t[6]?"cursor-grab":"")+" p-1 pr-4 rounded-md "+(t[9].entry&&X.getId(t[9].entry)===X.getId(t[35])?"opacity-0":"")+" "+(t[4]===t[37]?"bg-zinc-600/20":""))&&d(e,"class",c)},d(p){p&&_(e),b=!1,ye(z)}}}function ot(t){let e,l,r,n,s,u,a,i,o,f,g;function v(T,y){return T[6]?pl:hl}let h=v(t),c=h(t),b=ve(t[0]),z=[];for(let T=0;T<b.length;T+=1)z[T]=it(rt(t,b,T));function S(...T){return t[26](t[32],...T)}function H(){return t[28](t[32])}return{c(){e=w("div"),l=w("div"),c.c(),u=V(),a=w("div"),i=w("div");for(let T=0;T<z.length;T+=1)z[T].c();o=V(),this.h()},l(T){e=k(T,"DIV",{class:!0});var y=E(e);l=k(y,"DIV",{id:!0,class:!0,style:!0});var p=E(l);c.l(p),p.forEach(_),y.forEach(_),u=G(T),a=k(T,"DIV",{class:!0});var D=E(a);i=k(D,"DIV",{class:!0});var R=E(i);for(let Y=0;Y<z.length;Y+=1)z[Y].l(R);R.forEach(_),o=G(D),D.forEach(_),this.h()},h(){d(l,"id",r="tier-"+t[32]),d(l,"class",n="flex items-center justify-center min-h-[9.5rem] w-full px-2 overflow-hidden bg-rose-600 "+(t[32].length*1.1>19?"text-lg":t[32].length*1.1>15?"text-xl":t[32].length*1.1>9?"text-2xl":"text-3xl")+" font-bold"),d(l,"style",s="filter: hue-rotate("+360/t[3].length*t[34]+"deg);}"),d(e,"class","flex w-full min-h-[9.5rem] text-3xl "+(t[34]%2===0?"bg-zinc-600/10":"")),d(i,"class","grid grid-cols-4 w-full"),d(a,"class","flex w-full min-h-[9.5rem] text-3xl "+(t[34]%2===0?"bg-zinc-600/10":""))},m(T,y){N(T,e,y),m(e,l),c.m(l,null),N(T,u,y),N(T,a,y),m(a,i);for(let p=0;p<z.length;p+=1)z[p]&&z[p].m(i,null);m(a,o),f||(g=[P(a,"dragover",be(ke(S))),P(a,"dragend",t[27]),P(a,"contextmenu",ke(H))],f=!0)},p(T,y){if(t=T,h===(h=v(t))&&c?c.p(t,y):(c.d(1),c=h(t),c&&(c.c(),c.m(l,null))),y[0]&8&&r!==(r="tier-"+t[32])&&d(l,"id",r),y[0]&8&&n!==(n="flex items-center justify-center min-h-[9.5rem] w-full px-2 overflow-hidden bg-rose-600 "+(t[32].length*1.1>19?"text-lg":t[32].length*1.1>15?"text-xl":t[32].length*1.1>9?"text-2xl":"text-3xl")+" font-bold")&&d(l,"class",n),y[0]&8&&s!==(s="filter: hue-rotate("+360/t[3].length*t[34]+"deg);}")&&d(l,"style",s),y[0]&989){b=ve(t[0]);let p;for(p=0;p<b.length;p+=1){const D=rt(t,b,p);z[p]?z[p].p(D,y):(z[p]=it(D),z[p].c(),z[p].m(i,null))}for(;p<z.length;p+=1)z[p].d(1);z.length=b.length}},d(T){T&&(_(e),_(u),_(a)),c.d(),Le(z,T),f=!1,ye(g)}}}function ml(t){let e,l,r,n,s,u,a,i,o="Create a new tier:",f,g,v,h,c,b,z,S;function H(L,q){return L[6]?fl:ul}let T=H(t),y=T(t),p=t[6]&&st(t);function D(L,q){return L[3].length?cl:dl}let R=D(t),Y=R(t);return c=new De({props:{icon:Gt,class:"text-2xl text-zinc-400"}}),{c(){e=w("section"),l=w("div"),y.c(),r=V(),p&&p.c(),n=V(),Y.c(),s=V(),u=w("form"),a=w("div"),i=w("h3"),i.textContent=o,f=V(),g=w("input"),v=V(),h=w("button"),oe(c.$$.fragment),this.h()},l(L){e=k(L,"SECTION",{class:!0});var q=E(e);l=k(q,"DIV",{class:!0});var le=E(l);y.l(le),r=G(le),p&&p.l(le),le.forEach(_),n=G(q),Y.l(q),s=G(q),u=k(q,"FORM",{class:!0});var j=E(u);a=k(j,"DIV",{class:!0});var M=E(a);i=k(M,"H3",{class:!0,"data-svelte-h":!0}),ze(i)!=="svelte-snqb8e"&&(i.textContent=o),f=G(M),g=k(M,"INPUT",{class:!0,type:!0,placeholder:!0}),M.forEach(_),v=G(j),h=k(j,"BUTTON",{class:!0});var U=E(h);ae(c.$$.fragment,U),U.forEach(_),j.forEach(_),q.forEach(_),this.h()},h(){d(l,"class","flex justify-between gap-2"),d(i,"class","text-lg font-semibold"),d(g,"class","py-2 px-4 rounded-md bg-zinc-600/30 focus:bg-zinc-600/40 transition outline-none border border-zinc-500/10"),d(g,"type","text"),d(g,"placeholder","The name for your tier"),d(a,"class","flex gap-4 items-center"),d(h,"class","flex items-center justify-center w-10 h-10 rounded-md bg-zinc-600/40 hover:bg-zinc-600/60 transition"),d(u,"class","flex items-center w-fit gap-4 p-2 pl-4 bg-zinc-700/80 rounded-md"),d(e,"class","flex flex-col w-full 2xl:w-3/4 gap-4 h-fit bg-zinc-700/50 p-4 rounded-md border border-zinc-500/20 shadow-xl backdrop-blur-sm")},m(L,q){N(L,e,q),m(e,l),y.m(l,null),m(l,r),p&&p.m(l,null),m(e,n),Y.m(e,null),m(e,s),m(e,u),m(u,a),m(a,i),m(a,f),m(a,g),Ye(g,t[5]),m(u,v),m(u,h),ue(c,h,null),b=!0,z||(S=[P(g,"input",t[29]),P(a,"mousedown",be(t[12])),P(a,"click",be(t[13])),P(u,"submit",ke(t[30]))],z=!0)},p(L,q){T===(T=H(L))&&y?y.p(L,q):(y.d(1),y=T(L),y&&(y.c(),y.m(l,r))),L[6]?p?(p.p(L,q),q[0]&64&&F(p,1)):(p=st(L),p.c(),F(p,1),p.m(l,null)):p&&(Ee(),J(p,1,1,()=>{p=null}),Ie()),R===(R=D(L))&&Y?Y.p(L,q):(Y.d(1),Y=R(L),Y&&(Y.c(),Y.m(e,s))),q[0]&32&&g.value!==L[5]&&Ye(g,L[5])},i(L){b||(F(p),F(c.$$.fragment,L),b=!0)},o(L){J(p),J(c.$$.fragment,L),b=!1},d(L){L&&_(e),y.d(),p&&p.d(),Y.d(),fe(c),z=!1,ye(S)}}}function at(){const t=document.querySelector('[contenteditable="true"]:focus');t&&t.blur()}function _l(t,e,l){let r,n,s,u,a,i;te(t,We,I=>l(11,s=I)),te(t,Ne,I=>l(7,u=I)),te(t,Re,I=>l(8,a=I)),te(t,_e,I=>l(9,i=I));let{lists:o}=e,{list:f}=e,{entries:g}=e,{tiers:v}=e,h,c;kt(()=>{document.addEventListener("click",at)}),yt(()=>{document.removeEventListener("click",at)});function b(I){Ae.call(this,t,I)}function z(I){Ae.call(this,t,I)}function S(I){Ae.call(this,t,I)}const H=async I=>{await ge.updateName(f.id,I.target.value)},T=async()=>{if(confirm("Are you sure you want to delete this list?")){const I=o.findIndex($=>$.id===f.id);if(I===-1)return;const K=o.length>1?o[I-1]:null;await ge.remove(f.id),await Et(K?`/${K.id}`:"/")}},y=()=>{ee.dragOver(g.length)},p=async(I,K)=>{let $=K.target.innerText;I!==$&&(v.includes($)||await ge.updateTier(f.id,I,$))},D=async(I,K)=>{let $=K.target.innerText;if(I!==$){if(v.includes($))return K.target.innerText=I,alert("A tier with that name already exists");await ge.updateTier(f.id,I,$)}},R=I=>{l(4,h=I)},Y=()=>{l(4,h=void 0)},L=(I,K)=>{r&&(l(4,h=void 0),ee.startDrag(K,I))},q=I=>{ee.drag(I)},le=(I,K,$)=>{const ie=$.dataTransfer;ie&&(ie.dropEffect="move",i.entry&&i.entry.tier!==I&&ee.dragOverTier(I),ee.dragOver(K))},j=async I=>{X.remove(X.getId(I)),u.length&&a&&await me.scheduleSearch(f.type,a.limit,a.offset)},M=(I,K)=>{const $=K.dataTransfer;if(!$)return;$.dropEffect="move",ee.dragOverTier(I);const ie=g.filter(pe=>pe.tier===I),C=g.indexOf(ie[ie.length-1]);ee.dragOver(C+1)},U=()=>{ee.dragEnd()},O=async I=>{if(confirm("Are you sure you want to delete this tier and all its entries?")){const K=g.filter($=>$.tier===I);for(const $ of K)X.remove(X.getId($));if(await ge.removeTier(f.id,I),!u.length)return;a&&await me.scheduleSearch(f.type,a.limit,a.offset)}};function W(){c=this.value,l(5,c)}const Q=async()=>{if(c){if(v.includes(c))return alert("A tier with that name already exists");await ge.addTier(f.id,c),l(5,c=void 0)}};return t.$$set=I=>{"lists"in I&&l(1,o=I.lists),"list"in I&&l(2,f=I.list),"entries"in I&&l(0,g=I.entries),"tiers"in I&&l(3,v=I.tiers)},t.$$.update=()=>{t.$$.dirty[0]&2052&&l(6,r=s&&s.uid===f.owner_id),t.$$.dirty[0]&9&&l(0,g=g.sort((I,K)=>{if(!I.tier||!K.tier)return 0;const $=v.findIndex(C=>C===I.tier),ie=v.findIndex(C=>C===K.tier);return $-ie})),t.$$.dirty[0]&8&&l(10,n=v.reduce((I,K)=>I.length>K.length?I:K,"")),t.$$.dirty[0]&1024&&n.length*1.1},[g,o,f,v,h,c,r,u,a,i,n,s,b,z,S,H,T,y,p,D,R,Y,L,q,le,j,M,U,O,W,Q]}class gl extends Pe{constructor(e){super(),Ve(this,e,_l,ml,Oe,{lists:1,list:2,entries:0,tiers:3},null,[-1,-1])}}function ut(t,e,l){const r=t.slice();return r[35]=e[l],r[37]=l,r}function ft(t,e,l){const r=t.slice();return r[38]=e[l],r[37]=l,r}function ct(t){let e,l,r=t[2]?"films":"shows",n,s,u,a;return{c(){e=w("button"),l=A("Switch to "),n=A(r),this.h()},l(i){e=k(i,"BUTTON",{type:!0,class:!0});var o=E(e);l=B(o,"Switch to "),n=B(o,r),o.forEach(_),this.h()},h(){d(e,"type","button"),d(e,"class",s="text-left w-1/2 border "+(t[2]?"bg-indigo-600/20 hover:bg-indigo-600/30 border-indigo-500/10":"bg-violet-600/20 hover:bg-violet-600/30 border-violet-500/10")+" transition px-4 text-sm py-1 text-zinc-200/60 h-full rounded-md svelte-w6jj3l")},m(i,o){N(i,e,o),m(e,l),m(e,n),u||(a=P(e,"click",t[19]),u=!0)},p(i,o){o[0]&4&&r!==(r=i[2]?"films":"shows")&&x(n,r),o[0]&4&&s!==(s="text-left w-1/2 border "+(i[2]?"bg-indigo-600/20 hover:bg-indigo-600/30 border-indigo-500/10":"bg-violet-600/20 hover:bg-violet-600/30 border-violet-500/10")+" transition px-4 text-sm py-1 text-zinc-200/60 h-full rounded-md svelte-w6jj3l")&&d(e,"class",s)},d(i){i&&_(e),u=!1,a()}}}function vl(t){let e,l,r,n,s=t[4]&&t[12]&&dt(t),u=ve(t[11]),a=[];for(let i=0;i<u.length;i+=1)a[i]=vt(ut(t,u,i));return{c(){e=w("div"),s&&s.c(),l=V(),r=w("div");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var o=E(e);s&&s.l(o),l=G(o),r=k(o,"DIV",{class:!0});var f=E(r);for(let g=0;g<a.length;g+=1)a[g].l(f);f.forEach(_),o.forEach(_),this.h()},h(){d(r,"class","flex flex-col max-h-[58vh] overflow-y-auto svelte-w6jj3l"),d(e,"class","flex flex-col gap-2 svelte-w6jj3l")},m(i,o){N(i,e,o),s&&s.m(e,null),m(e,l),m(e,r);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(r,null);t[31](r),n=!0},p(i,o){if(i[4]&&i[12]?s?(s.p(i,o),o[0]&4112&&F(s,1)):(s=dt(i),s.c(),F(s,1),s.m(e,l)):s&&(Ee(),J(s,1,1,()=>{s=null}),Ie()),o[0]&19491){u=ve(i[11]);let f;for(f=0;f<u.length;f+=1){const g=ut(i,u,f);a[f]?a[f].p(g,o):(a[f]=vt(g),a[f].c(),a[f].m(r,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=u.length}},i(i){n||(F(s),n=!0)},o(i){J(s),n=!1},d(i){i&&_(e),s&&s.d(),Le(a,i),t[31](null)}}}function bl(t){let e,l="All results are in your list";return{c(){e=w("p"),e.textContent=l,this.h()},l(r){e=k(r,"P",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-lsi21e"&&(e.textContent=l),this.h()},h(){d(e,"class","flex px-1 text-zinc-400 svelte-w6jj3l")},m(r,n){N(r,e,n)},p:ne,i:ne,o:ne,d(r){r&&_(e)}}}function wl(t){let e,l="No results found";return{c(){e=w("p"),e.textContent=l,this.h()},l(r){e=k(r,"P",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-pbt2jg"&&(e.textContent=l),this.h()},h(){d(e,"class","flex px-1 text-zinc-400 svelte-w6jj3l")},m(r,n){N(r,e,n)},p:ne,i:ne,o:ne,d(r){r&&_(e)}}}function kl(t){let e,l="Start typing to search";return{c(){e=w("p"),e.textContent=l,this.h()},l(r){e=k(r,"P",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-ebub2j"&&(e.textContent=l),this.h()},h(){d(e,"class","flex px-1 text-zinc-400 svelte-w6jj3l")},m(r,n){N(r,e,n)},p:ne,i:ne,o:ne,d(r){r&&_(e)}}}function dt(t){let e,l,r,n=t[4].count+"",s,u,a,i,o,f,g,v,h,c,b,z,S,H,T,y,p,D,R,Y,L,q;g=new De({props:{icon:Lt}}),b=new De({props:{icon:Yt}});let le=ve(new Array(Math.min(5,t[9]))),j=[];for(let O=0;O<le.length;O+=1)j[O]=pt(ft(t,le,O));let M=t[9]>10&&t[8]<t[9]-2&&mt(t),U=t[11].length===0&&gt();return{c(){e=w("div"),l=w("p"),r=A("Results: "),s=A(n),u=V(),a=w("span"),i=V(),o=w("div"),f=w("button"),oe(g.$$.fragment),h=V(),c=w("button"),oe(b.$$.fragment),S=V(),H=w("span"),T=V(),y=w("div");for(let O=0;O<j.length;O+=1)j[O].c();p=V(),M&&M.c(),D=V(),U&&U.c(),R=de(),this.h()},l(O){e=k(O,"DIV",{class:!0});var W=E(e);l=k(W,"P",{class:!0});var Q=E(l);r=B(Q,"Results: "),s=B(Q,n),Q.forEach(_),u=G(W),a=k(W,"SPAN",{class:!0}),E(a).forEach(_),i=G(W),o=k(W,"DIV",{class:!0});var I=E(o);f=k(I,"BUTTON",{class:!0});var K=E(f);ae(g.$$.fragment,K),K.forEach(_),h=G(I),c=k(I,"BUTTON",{class:!0});var $=E(c);ae(b.$$.fragment,$),$.forEach(_),I.forEach(_),S=G(W),H=k(W,"SPAN",{class:!0}),E(H).forEach(_),T=G(W),y=k(W,"DIV",{class:!0});var ie=E(y);for(let C=0;C<j.length;C+=1)j[C].l(ie);p=G(ie),M&&M.l(ie),ie.forEach(_),W.forEach(_),D=G(O),U&&U.l(O),R=de(),this.h()},h(){d(l,"class","w-fit shrink-0 svelte-w6jj3l"),d(a,"class","bg-zinc-600 w-px h-4 shrink-0 svelte-w6jj3l"),d(f,"class",v=(t[4].offset?"hover:text-zinc-400":"text-zinc-600 cursor-not-allowed")+" transition svelte-w6jj3l"),d(c,"class",z=(t[4].offset+t[4].limit<t[4].count?"hover:text-zinc-400":"text-zinc-600 cursor-not-allowed")+" transition svelte-w6jj3l"),d(o,"class","flex gap-1 shrink-0 svelte-w6jj3l"),d(H,"class","bg-zinc-600 w-px h-4 shrink-0 svelte-w6jj3l"),d(y,"class","flex gap-1 overflow-hidden items-center svelte-w6jj3l"),d(e,"class","flex gap-2 px-1 items-center text-zinc-300 svelte-w6jj3l")},m(O,W){N(O,e,W),m(e,l),m(l,r),m(l,s),m(e,u),m(e,a),m(e,i),m(e,o),m(o,f),ue(g,f,null),m(o,h),m(o,c),ue(b,c,null),m(e,S),m(e,H),m(e,T),m(e,y);for(let Q=0;Q<j.length;Q+=1)j[Q]&&j[Q].m(y,null);m(y,p),M&&M.m(y,null),N(O,D,W),U&&U.m(O,W),N(O,R,W),Y=!0,L||(q=[P(f,"click",t[21]),P(c,"click",t[22])],L=!0)},p(O,W){if((!Y||W[0]&16)&&n!==(n=O[4].count+"")&&x(s,n),(!Y||W[0]&16&&v!==(v=(O[4].offset?"hover:text-zinc-400":"text-zinc-600 cursor-not-allowed")+" transition svelte-w6jj3l"))&&d(f,"class",v),(!Y||W[0]&16&&z!==(z=(O[4].offset+O[4].limit<O[4].count?"hover:text-zinc-400":"text-zinc-600 cursor-not-allowed")+" transition svelte-w6jj3l"))&&d(c,"class",z),W[0]&797){le=ve(new Array(Math.min(5,O[9])));let Q;for(Q=0;Q<le.length;Q+=1){const I=ft(O,le,Q);j[Q]?j[Q].p(I,W):(j[Q]=pt(I),j[Q].c(),j[Q].m(y,p))}for(;Q<j.length;Q+=1)j[Q].d(1);j.length=le.length}O[9]>10&&O[8]<O[9]-2?M?M.p(O,W):(M=mt(O),M.c(),M.m(y,null)):M&&(M.d(1),M=null),O[11].length===0?U||(U=gt(),U.c(),U.m(R.parentNode,R)):U&&(U.d(1),U=null)},i(O){Y||(F(g.$$.fragment,O),F(b.$$.fragment,O),Y=!0)},o(O){J(g.$$.fragment,O),J(b.$$.fragment,O),Y=!1},d(O){O&&(_(e),_(D),_(R)),fe(g),fe(b),Le(j,O),M&&M.d(),U&&U.d(O),L=!1,ye(q)}}}function ht(t){let e,l,r=(t[8]<3?t[37]+1:t[37]+t[8]-2)+"",n,s,u,a;function i(){return t[23](t[37])}return{c(){e=w("button"),l=w("p"),n=A(r),this.h()},l(o){e=k(o,"BUTTON",{class:!0});var f=E(e);l=k(f,"P",{class:!0});var g=E(l);n=B(g,r),g.forEach(_),f.forEach(_),this.h()},h(){d(l,"class",s="border-b h-[1.4rem] "+((t[8]<3?t[37]+1:t[37]+t[8]-2)===t[8]?"border-zinc-200":"border-transparent")+" svelte-w6jj3l"),d(e,"class","svelte-w6jj3l")},m(o,f){N(o,e,f),m(e,l),m(l,n),u||(a=P(e,"click",i),u=!0)},p(o,f){t=o,f[0]&256&&r!==(r=(t[8]<3?t[37]+1:t[37]+t[8]-2)+"")&&x(n,r),f[0]&256&&s!==(s="border-b h-[1.4rem] "+((t[8]<3?t[37]+1:t[37]+t[8]-2)===t[8]?"border-zinc-200":"border-transparent")+" svelte-w6jj3l")&&d(l,"class",s)},d(o){o&&_(e),u=!1,a()}}}function pt(t){let e,l=(t[8]<3?t[37]+1:t[37]+t[8]-2)<=t[9]&&ht(t);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,n){l&&l.m(r,n),N(r,e,n)},p(r,n){(r[8]<3?r[37]+1:r[37]+r[8]-2)<=r[9]?l?l.p(r,n):(l=ht(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(r){r&&_(e),l&&l.d(r)}}}function mt(t){let e,l,r,n,s,u,a=t[8]<t[9]-3&&_t();return{c(){a&&a.c(),e=V(),l=w("button"),r=w("p"),n=A(t[9]),this.h()},l(i){a&&a.l(i),e=G(i),l=k(i,"BUTTON",{class:!0});var o=E(l);r=k(o,"P",{class:!0});var f=E(r);n=B(f,t[9]),f.forEach(_),o.forEach(_),this.h()},h(){d(r,"class","border-b h-[1.4rem] border-transparent svelte-w6jj3l"),d(l,"class","svelte-w6jj3l")},m(i,o){a&&a.m(i,o),N(i,e,o),N(i,l,o),m(l,r),m(r,n),s||(u=P(l,"click",t[24]),s=!0)},p(i,o){i[8]<i[9]-3?a||(a=_t(),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),o[0]&512&&x(n,i[9])},d(i){i&&(_(e),_(l)),a&&a.d(i),s=!1,u()}}}function _t(t){let e,l="...";return{c(){e=w("p"),e.textContent=l,this.h()},l(r){e=k(r,"P",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-nvw4vi"&&(e.textContent=l),this.h()},h(){d(e,"class","svelte-w6jj3l")},m(r,n){N(r,e,n)},d(r){r&&_(e)}}}function gt(t){let e,l="All results from this page are in your list";return{c(){e=w("p"),e.textContent=l,this.h()},l(r){e=k(r,"P",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-14ue5n5"&&(e.textContent=l),this.h()},h(){d(e,"class","flex px-1 pt-3 text-zinc-400 svelte-w6jj3l")},m(r,n){N(r,e,n)},d(r){r&&_(e)}}}function vt(t){let e,l,r,n,s,u,a=t[35].title+"",i,o,f,g=he.get(t[0],t[35])+"",v,h,c,b,z;function S(){return t[25](t[37])}function H(){return t[27](t[35])}function T(...y){return t[28](t[35],...y)}return{c(){e=w("button"),l=w("img"),n=V(),s=w("div"),u=w("h2"),i=A(a),o=V(),f=w("p"),v=A(g),h=V(),this.h()},l(y){e=k(y,"BUTTON",{id:!0,draggable:!0,class:!0});var p=E(e);l=k(p,"IMG",{draggable:!0,src:!0,alt:!0,class:!0}),n=G(p),s=k(p,"DIV",{class:!0});var D=E(s);u=k(D,"H2",{class:!0});var R=E(u);i=B(R,a),R.forEach(_),o=G(D),f=k(D,"P",{class:!0});var Y=E(f);v=B(Y,g),Y.forEach(_),D.forEach(_),h=G(p),p.forEach(_),this.h()},h(){d(l,"draggable","false"),ce(l.src,r=t[35].poster_url)||d(l,"src",r),d(l,"alt",""),d(l,"class","h-24 aspect-[2/3] object-cover rounded-sm svelte-w6jj3l"),d(u,"class","text-xl overflow-hidden text-left leading-6 py-1 line-clamp-3 overflow-ellipsis svelte-w6jj3l"),d(f,"class","text-left text-xs text-zinc-400 overflow-hidden whitespace-nowrap overflow-ellipsis svelte-w6jj3l"),d(s,"class","flex flex-col max-h-24 overflow-hidden svelte-w6jj3l"),d(e,"id","results-"+t[37]),d(e,"draggable","true"),d(e,"class",c="flex outline-none gap-4 p-1 rounded-md overflow-hidden h-[6.5rem] flex-shrink-0 "+(t[5]===t[37]?"bg-zinc-600/20":t[10]===t[37]?"bg-zinc-500/20":"")+" transition-[background-color] items-center "+(t[14].entry&&X.getId(t[14].entry)===X.getId(t[35])?"opacity-0":"")+" "+(t[11].length>5?"mr-4":"")+" svelte-w6jj3l")},m(y,p){N(y,e,p),m(e,l),m(e,n),m(e,s),m(s,u),m(u,i),m(s,o),m(s,f),m(f,v),m(e,h),b||(z=[P(e,"mouseenter",S),P(e,"mouseleave",t[26]),P(e,"click",H),P(e,"dragstart",T),P(e,"drag",t[29]),P(e,"dragend",t[30])],b=!0)},p(y,p){t=y,p[0]&2048&&!ce(l.src,r=t[35].poster_url)&&d(l,"src",r),p[0]&2048&&a!==(a=t[35].title+"")&&x(i,a),p[0]&2049&&g!==(g=he.get(t[0],t[35])+"")&&x(v,g),p[0]&19488&&c!==(c="flex outline-none gap-4 p-1 rounded-md overflow-hidden h-[6.5rem] flex-shrink-0 "+(t[5]===t[37]?"bg-zinc-600/20":t[10]===t[37]?"bg-zinc-500/20":"")+" transition-[background-color] items-center "+(t[14].entry&&X.getId(t[14].entry)===X.getId(t[35])?"opacity-0":"")+" "+(t[11].length>5?"mr-4":"")+" svelte-w6jj3l")&&d(e,"class",c)},d(y){y&&_(e),b=!1,ye(z)}}}function yl(t){let e,l,r="Search",n,s,u,a,i,o,f,g,v,h,c,b=t[3]&&ct(t);const z=[kl,wl,bl,vl],S=[];function H(T,y){return je?T[13].length===0?1:T[11].length===0&&T[9]<=1?2:3:0}return f=H(t),g=S[f]=z[f](t),{c(){e=w("section"),l=w("h2"),l.textContent=r,n=V(),s=w("form"),u=w("input"),i=V(),b&&b.c(),o=V(),g.c(),this.h()},l(T){e=k(T,"SECTION",{class:!0});var y=E(e);l=k(y,"H2",{class:!0,"data-svelte-h":!0}),ze(l)!=="svelte-ae9rv5"&&(l.textContent=r),n=G(y),s=k(y,"FORM",{autocomplete:!0,class:!0});var p=E(s);u=k(p,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),i=G(p),b&&b.l(p),p.forEach(_),o=G(y),g.l(y),y.forEach(_),this.h()},h(){d(l,"class","text-3xl px-1 h-10 font-bold svelte-w6jj3l"),d(u,"class","py-2 px-4 rounded-md bg-zinc-600/30 focus:bg-zinc-600/40 transition outline-none border border-zinc-500/10 svelte-w6jj3l"),d(u,"type","text"),d(u,"id","search"),d(u,"placeholder",a="Enter a "+(t[3]?t[2]?"show":"film":we.getSnippet(t[0].type).replace(/(s)(?!.*\1)/,""))+" title"),d(s,"autocomplete","off"),d(s,"class","flex flex-col gap-1 svelte-w6jj3l"),d(e,"class","hidden 2xl:visible 2xl:flex sticky top-12 flex-col gap-4 w-1/4 h-fit bg-zinc-700/50 p-4 rounded-md border border-zinc-500/20 shadow-xl backdrop-blur-sm svelte-w6jj3l")},m(T,y){N(T,e,y),m(e,l),m(e,n),m(e,s),m(s,u),t[16](u),Ye(u,t[12]),m(s,i),b&&b.m(s,null),m(e,o),S[f].m(e,null),v=!0,h||(c=[P(u,"input",t[17]),P(u,"input",t[18]),P(s,"submit",ke(t[20]))],h=!0)},p(T,y){(!v||y[0]&13&&a!==(a="Enter a "+(T[3]?T[2]?"show":"film":we.getSnippet(T[0].type).replace(/(s)(?!.*\1)/,""))+" title"))&&d(u,"placeholder",a),y[0]&4096&&u.value!==T[12]&&Ye(u,T[12]),T[3]?b?b.p(T,y):(b=ct(T),b.c(),b.m(s,null)):b&&(b.d(1),b=null);let p=f;f=H(T),f===p?S[f].p(T,y):(Ee(),J(S[p],1,1,()=>{S[p]=null}),Ie(),g=S[f],g?g.p(T,y):(g=S[f]=z[f](T),g.c()),F(g,1),g.m(e,null))},i(T){v||(F(g),v=!0)},o(T){J(g),v=!1},d(T){T&&_(e),t[16](null),b&&b.d(),S[f].d(),h=!1,ye(c)}}}function Tl(t,e,l){let r,n,s,u,a,i,o,f,g,v;te(t,Re,C=>l(4,a=C)),te(t,Ze,C=>l(32,i=C)),te(t,Me,C=>l(11,o=C)),te(t,je,C=>l(12,f=C)),te(t,Ne,C=>l(13,g=C)),te(t,_e,C=>l(14,v=C));let{list:h}=e,{entries:c}=e;function b(){je.set(""),Ne.set([]),Me.set([]),l(5,z=void 0),l(10,r=0)}let z,S,H;kt(()=>{document.addEventListener("keypress",T),document.addEventListener("keydown",C=>y(C))}),yt(()=>{document.removeEventListener("keypress",T),document.removeEventListener("keydown",C=>y(C))});function T(){!S||document.activeElement!==null&&document.activeElement!==document.body||S.focus()}function y(C){if(C.key==="ArrowDown"){r<o.length-1?l(10,r++,r):l(10,r=0);const pe=document.getElementById("results-0");if(!pe)return;H.scrollTo({top:Math.max(0,r*pe.offsetHeight),behavior:"smooth"})}if(C.key==="ArrowUp"){r>0?l(10,r--,r):l(10,r=o.length-1);const pe=document.getElementById("results-0");if(!pe)return;H.scrollTo({top:Math.max(0,r*pe.offsetHeight),behavior:"smooth"})}}let p=!1;function D(C){Qe[C?"unshift":"push"](()=>{S=C,l(6,S)})}function R(){f=this.value,je.set(f)}const Y=async()=>{if(!f){Ne.set([]),Me.set([]);return}await me.scheduleSearch(n?p?se.Shows:se.Films:h.type)},L=async()=>{l(2,p=!p),f&&await me.scheduleSearch(p?se.Shows:se.Films)},q=async()=>{!o.length||o.length<=r||(X.add(o[r]),b())},le=async()=>{a.offset&&await me.scheduleSearch(n?p?se.Shows:se.Films:h.type,a.limit,Math.max(0,a.offset-a.limit))},j=async()=>{a.offset+a.limit>=a.count||await me.scheduleSearch(n?p?se.Shows:se.Films:h.type,a.limit,a.offset+a.limit)},M=async C=>{const pe=(u<3?C+1:C+u-2)*a.limit-a.limit;await me.scheduleSearch(n?p?se.Shows:se.Films:h.type,a.limit,pe)},U=async()=>{const C=s*a.limit-a.limit;await me.scheduleSearch(n?p?se.Shows:se.Films:h.type,a.limit,C)},O=C=>{l(5,z=C)},W=()=>{l(5,z=void 0)},Q=async C=>{h.rankType===Te.Ranks?await X.add(C):h.rankType===Te.Tiers&&h.tiers&&h.tiers.length&&await X.add({...C,tier:h.tiers[h.tiers.length-1]}),l(10,r=0),me.filter(c)},I=(C,pe)=>{l(5,z=void 0),l(10,r=0),ee.startDrag(pe,C,!0)},K=C=>{ee.drag(C)},$=()=>{ee.dragEnd(),o.length===1?(je.set(""),Me.set([])):me.filter(c),ee.setLastMove(void 0)};function ie(C){Qe[C?"unshift":"push"](()=>{H=C,l(7,H)})}return t.$$set=C=>{"list"in C&&l(0,h=C.list),"entries"in C&&l(1,c=C.entries)},t.$$.update=()=>{t.$$.dirty[0]&1&&h&&b(),t.$$.dirty[0]&1&&l(3,n=h.type===se.Films),t.$$.dirty[0]&13&&wt(Ze,i=n&&p?se.Shows:h.type,i),t.$$.dirty[0]&16&&l(9,s=a?Math.ceil(a.count/a.limit):0),t.$$.dirty[0]&16&&l(8,u=a?Math.floor(a.offset/a.limit)+1:0)},l(10,r=0),[h,c,p,n,a,z,S,H,u,s,r,o,f,g,v,b,D,R,Y,L,q,le,j,M,U,O,W,Q,I,K,$,ie]}class jl extends Pe{constructor(e){super(),Ve(this,e,Tl,yl,Oe,{list:0,entries:1},null,[-1,-1])}}function bt(t){let e;function l(s,u){return!s[2].fromSearch&&!s[3].tier?zl:s[3].tier?El:Il}let r=l(t),n=r(t);return{c(){n.c(),e=de()},l(s){n.l(s),e=de()},m(s,u){n.m(s,u),N(s,e,u)},p(s,u){r===(r=l(s))&&n?n.p(s,u):(n.d(1),n=r(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&_(e),n.d(s)}}}function El(t){let e,l,r,n,s,u,a=t[3].title+"",i,o,f,g=he.get(t[1],t[3])+"",v;return{c(){e=w("div"),l=w("img"),n=V(),s=w("div"),u=w("h2"),i=A(a),o=V(),f=w("p"),v=A(g),this.h()},l(h){e=k(h,"DIV",{class:!0,style:!0});var c=E(e);l=k(c,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),n=G(c),s=k(c,"DIV",{class:!0});var b=E(s);u=k(b,"H2",{class:!0});var z=E(u);i=B(z,a),z.forEach(_),o=G(b),f=k(b,"P",{class:!0});var S=E(f);v=B(S,g),S.forEach(_),b.forEach(_),c.forEach(_),this.h()},h(){ce(l.src,r=t[3].poster_url)||d(l,"src",r),d(l,"alt",""),d(l,"class","h-36 aspect-[2/3] object-cover rounded-sm"),d(l,"draggable","false"),d(u,"class","font-semibold line-clamp-3 text-xl"),d(f,"class","text-xs text-zinc-400 overflow-hidden whitespace-nowrap overflow-ellipsis"),d(s,"class","flex flex-col gap-1 max-h-36 overflow-hidden"),d(e,"class","fixed z-20 flex items-center gap-3 transition bg-zinc-600/50 pointer-events-none p-1 pr-4 rounded-md"),re(e,"width",t[5]+"px"),re(e,"top",t[4].topDistance+t[4].mouseY+"px"),re(e,"left",t[4].leftDistance+t[4].mouseX+"px")},m(h,c){N(h,e,c),m(e,l),m(e,n),m(e,s),m(s,u),m(u,i),m(s,o),m(s,f),m(f,v)},p(h,c){c&8&&!ce(l.src,r=h[3].poster_url)&&d(l,"src",r),c&8&&a!==(a=h[3].title+"")&&x(i,a),c&10&&g!==(g=he.get(h[1],h[3])+"")&&x(v,g),c&32&&re(e,"width",h[5]+"px"),c&16&&re(e,"top",h[4].topDistance+h[4].mouseY+"px"),c&16&&re(e,"left",h[4].leftDistance+h[4].mouseX+"px")},d(h){h&&_(e)}}}function Il(t){let e,l,r,n,s,u,a=t[3].title+"",i,o,f,g=he.get(t[1],t[3])+"",v;return{c(){e=w("div"),l=w("img"),n=V(),s=w("div"),u=w("h2"),i=A(a),o=V(),f=w("p"),v=A(g),this.h()},l(h){e=k(h,"DIV",{class:!0,style:!0});var c=E(e);l=k(c,"IMG",{src:!0,alt:!0,class:!0}),n=G(c),s=k(c,"DIV",{class:!0});var b=E(s);u=k(b,"H2",{class:!0});var z=E(u);i=B(z,a),z.forEach(_),o=G(b),f=k(b,"P",{class:!0});var S=E(f);v=B(S,g),S.forEach(_),b.forEach(_),c.forEach(_),this.h()},h(){ce(l.src,r=t[3].poster_url)||d(l,"src",r),d(l,"alt",""),d(l,"class","h-24 aspect-[2/3] object-cover rounded-sm"),d(u,"class","text-xl overflow-hidden text-left leading-6 py-1 line-clamp-3 overflow-ellipsis"),d(f,"class","text-left text-xs text-zinc-400 overflow-hidden whitespace-nowrap overflow-ellipsis"),d(s,"class","flex flex-col max-h-24 overflow-hidden"),d(e,"class","fixed z-20 flex outline-none gap-4 p-1 rounded-md overflow-hidden h-[6.5rem] flex-shrink-0 transition bg-zinc-600/50 pointer-events-none items-center"),re(e,"width",t[5]+"px"),re(e,"top",t[4].topDistance+t[4].mouseY+"px"),re(e,"left",t[4].leftDistance+t[4].mouseX+"px")},m(h,c){N(h,e,c),m(e,l),m(e,n),m(e,s),m(s,u),m(u,i),m(s,o),m(s,f),m(f,v)},p(h,c){c&8&&!ce(l.src,r=h[3].poster_url)&&d(l,"src",r),c&8&&a!==(a=h[3].title+"")&&x(i,a),c&10&&g!==(g=he.get(h[1],h[3])+"")&&x(v,g),c&32&&re(e,"width",h[5]+"px"),c&16&&re(e,"top",h[4].topDistance+h[4].mouseY+"px"),c&16&&re(e,"left",h[4].leftDistance+h[4].mouseX+"px")},d(h){h&&_(e)}}}function zl(t){let e,l,r,n,s,u,a,i=t[0].indexOf(t[3])+1+"",o,f,g,v,h=t[3].title+"",c,b,z,S,H=he.get(t[1],t[3])+"",T,y;return{c(){e=w("div"),l=w("img"),n=V(),s=w("div"),u=w("p"),a=A("#"),o=A(i),g=V(),v=w("h2"),c=A(h),z=V(),S=w("p"),T=A(H),this.h()},l(p){e=k(p,"DIV",{class:!0,style:!0});var D=E(e);l=k(D,"IMG",{src:!0,alt:!0,class:!0}),n=G(D),s=k(D,"DIV",{class:!0});var R=E(s);u=k(R,"P",{class:!0});var Y=E(u);a=B(Y,"#"),o=B(Y,i),Y.forEach(_),g=G(R),v=k(R,"H2",{class:!0});var L=E(v);c=B(L,h),L.forEach(_),z=G(R),S=k(R,"P",{class:!0});var q=E(S);T=B(q,H),q.forEach(_),R.forEach(_),D.forEach(_),this.h()},h(){ce(l.src,r=t[3].poster_url)||d(l,"src",r),d(l,"alt",""),d(l,"class","h-36 aspect-[2/3] object-cover rounded-sm"),d(u,"class",f=t[1].style!==Z.Grid?"text-2xl":t[6]>3?"text-xl":"text-2xl"),d(v,"class",b="font-semibold line-clamp-3 "+(t[1].style!==Z.Grid?"text-3xl":t[6]>4?"text-sm":t[6]>3?"text-lg":t[6]>2?"text-xl":"text-3xl")),d(S,"class","text-xs text-zinc-400 overflow-hidden whitespace-nowrap overflow-ellipsis"),d(s,"class","flex flex-col gap-1 max-h-36 overflow-hidden"),d(e,"class",y="fixed z-20 flex items-center "+(t[1].style!==Z.Grid?"gap-6":t[6]>3?"gap-3":t[6]>2?"gap-4":"gap-6")+" transition bg-zinc-600/50 pointer-events-none p-1 "+(t[1].style!==Z.Grid?"pr-4":t[6]>3?"pr-1":t[6]>2?"pr-2":"pr-4")+" rounded-md"),re(e,"width",t[5]+"px"),re(e,"top",t[4].topDistance+t[4].mouseY+"px"),re(e,"left",t[4].leftDistance+t[4].mouseX+"px")},m(p,D){N(p,e,D),m(e,l),m(e,n),m(e,s),m(s,u),m(u,a),m(u,o),m(s,g),m(s,v),m(v,c),m(s,z),m(s,S),m(S,T)},p(p,D){D&8&&!ce(l.src,r=p[3].poster_url)&&d(l,"src",r),D&9&&i!==(i=p[0].indexOf(p[3])+1+"")&&x(o,i),D&66&&f!==(f=p[1].style!==Z.Grid?"text-2xl":p[6]>3?"text-xl":"text-2xl")&&d(u,"class",f),D&8&&h!==(h=p[3].title+"")&&x(c,h),D&66&&b!==(b="font-semibold line-clamp-3 "+(p[1].style!==Z.Grid?"text-3xl":p[6]>4?"text-sm":p[6]>3?"text-lg":p[6]>2?"text-xl":"text-3xl"))&&d(v,"class",b),D&10&&H!==(H=he.get(p[1],p[3])+"")&&x(T,H),D&66&&y!==(y="fixed z-20 flex items-center "+(p[1].style!==Z.Grid?"gap-6":p[6]>3?"gap-3":p[6]>2?"gap-4":"gap-6")+" transition bg-zinc-600/50 pointer-events-none p-1 "+(p[1].style!==Z.Grid?"pr-4":p[6]>3?"pr-1":p[6]>2?"pr-2":"pr-4")+" rounded-md")&&d(e,"class",y),D&32&&re(e,"width",p[5]+"px"),D&16&&re(e,"top",p[4].topDistance+p[4].mouseY+"px"),D&16&&re(e,"left",p[4].leftDistance+p[4].mouseX+"px")},d(p){p&&_(e)}}}function Dl(t){let e,l=t[3]&&t[5]&&bt(t);return{c(){l&&l.c(),e=de()},l(r){l&&l.l(r),e=de()},m(r,n){l&&l.m(r,n),N(r,e,n)},p(r,[n]){r[3]&&r[5]?l?l.p(r,n):(l=bt(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:ne,o:ne,d(r){r&&_(e),l&&l.d(r)}}}function Sl(t,e,l){let r,n,s,u,a,i,o,f;te(t,Je,b=>l(6,f=b));let{entries:g}=e,{list:v}=e,{dragged:h}=e,c=!1;return t.$$set=b=>{"entries"in b&&l(0,g=b.entries),"list"in b&&l(1,v=b.list),"dragged"in b&&l(2,h=b.dragged)},t.$$.update=()=>{t.$$.dirty&4&&l(3,r=h.entry),t.$$.dirty&4&&l(5,n=h.width),t.$$.dirty&4&&l(4,s=h.measurements),t.$$.dirty&4&&l(9,u=h.moveIndex),t.$$.dirty&4&&l(11,a=h.lastMoveIndex),t.$$.dirty&4&&l(8,i=h.moveTier),t.$$.dirty&4&&l(10,o=h.lastMoveTier),t.$$.dirty&3979&&r&&(u!==void 0&&u!==a||i!==void 0&&i!==o)&&!c&&(l(7,c=!0),g.map(b=>X.getId(b)).includes(X.getId(r))||(v.rankType===Te.Ranks?X.add(r):v.rankType===Te.Tiers&&v.tiers&&v.tiers.length&&X.add({...r,tier:v.tiers[v.tiers.length-1]})),u!==void 0&&(X.moveTo(X.getId(r),u),ee.setLastMove(u)),i!==void 0&&(X.moveToTier(X.getId(r),i),ee.setLastTier(i)),l(7,c=!1))},[g,v,h,r,s,n,f,c,i,u,o,a]}class Cl extends Pe{constructor(e){super(),Ve(this,e,Sl,Dl,Oe,{entries:0,list:1,dragged:2})}}function Ml(t){let e,l,r="Hint:",n,s,u=t[0]==="ownership"?"You're looking at someone else's list":"Create a tier to start searching",a;return{c(){e=w("section"),l=w("p"),l.textContent=r,n=V(),s=w("h2"),a=A(u),this.h()},l(i){e=k(i,"SECTION",{class:!0});var o=E(e);l=k(o,"P",{class:!0,"data-svelte-h":!0}),ze(l)!=="svelte-18igvoy"&&(l.textContent=r),n=G(o),s=k(o,"H2",{class:!0});var f=E(s);a=B(f,u),f.forEach(_),o.forEach(_),this.h()},h(){d(l,"class","text-3xl font-bold h-10"),d(s,"class","text-2xl px-1"),d(e,"class","hidden 2xl:visible 2xl:flex sticky top-12 flex-col gap-4 w-1/4 h-fit bg-zinc-700/50 p-4 rounded-md border border-zinc-500/20 shadow-xl backdrop-blur-sm")},m(i,o){N(i,e,o),m(e,l),m(e,n),m(e,s),m(s,a)},p(i,[o]){o&1&&u!==(u=i[0]==="ownership"?"You're looking at someone else's list":"Create a tier to start searching")&&x(a,u)},i:ne,o:ne,d(i){i&&_(e)}}}function Nl(t,e,l){let{reason:r="ownership"}=e;return t.$$set=n=>{"reason"in n&&l(0,r=n.reason)},[r]}class Ct extends Pe{constructor(e){super(),Ve(this,e,Nl,Ml,Oe,{reason:0})}}function Ol(t){let e,l;return e=new At({}),{c(){oe(e.$$.fragment)},l(r){ae(e.$$.fragment,r)},m(r,n){ue(e,r,n),l=!0},p:ne,i(r){l||(F(e.$$.fragment,r),l=!0)},o(r){J(e.$$.fragment,r),l=!1},d(r){fe(e,r)}}}function Pl(t){let e,l,r,n,s,u,a;const i=[Gl,Vl],o=[];function f(c,b){return c[0].rankType===Te.Ranks?0:c[0].rankType===Te.Tiers&&c[2]?1:-1}~(e=f(t))&&(l=o[e]=i[e](t));const g=[Hl,Yl,Ll],v=[];function h(c,b){var z;return c[3].uid===c[0].owner_id&&(c[0].rankType!==Te.Tiers||(z=c[2])!=null&&z.length)?0:c[0].rankType!==Te.Tiers?1:2}return n=h(t),s=v[n]=g[n](t),{c(){l&&l.c(),r=V(),s.c(),u=de()},l(c){l&&l.l(c),r=G(c),s.l(c),u=de()},m(c,b){~e&&o[e].m(c,b),N(c,r,b),v[n].m(c,b),N(c,u,b),a=!0},p(c,b){let z=e;e=f(c),e===z?~e&&o[e].p(c,b):(l&&(Ee(),J(o[z],1,1,()=>{o[z]=null}),Ie()),~e?(l=o[e],l?l.p(c,b):(l=o[e]=i[e](c),l.c()),F(l,1),l.m(r.parentNode,r)):l=null);let S=n;n=h(c),n===S?v[n].p(c,b):(Ee(),J(v[S],1,1,()=>{v[S]=null}),Ie(),s=v[n],s?s.p(c,b):(s=v[n]=g[n](c),s.c()),F(s,1),s.m(u.parentNode,u))},i(c){a||(F(l),F(s),a=!0)},o(c){J(l),J(s),a=!1},d(c){c&&(_(r),_(u)),~e&&o[e].d(c),v[n].d(c)}}}function Vl(t){let e,l;return e=new gl({props:{lists:t[4],list:t[0],tiers:t[2],entries:t[1]}}),{c(){oe(e.$$.fragment)},l(r){ae(e.$$.fragment,r)},m(r,n){ue(e,r,n),l=!0},p(r,n){const s={};n&16&&(s.lists=r[4]),n&1&&(s.list=r[0]),n&4&&(s.tiers=r[2]),n&2&&(s.entries=r[1]),e.$set(s)},i(r){l||(F(e.$$.fragment,r),l=!0)},o(r){J(e.$$.fragment,r),l=!1},d(r){fe(e,r)}}}function Gl(t){let e,l;return e=new al({props:{lists:t[4],list:t[0],entries:t[1]}}),{c(){oe(e.$$.fragment)},l(r){ae(e.$$.fragment,r)},m(r,n){ue(e,r,n),l=!0},p(r,n){const s={};n&16&&(s.lists=r[4]),n&1&&(s.list=r[0]),n&2&&(s.entries=r[1]),e.$set(s)},i(r){l||(F(e.$$.fragment,r),l=!0)},o(r){J(e.$$.fragment,r),l=!1},d(r){fe(e,r)}}}function Ll(t){let e,l;return e=new Ct({props:{reason:"notiers"}}),{c(){oe(e.$$.fragment)},l(r){ae(e.$$.fragment,r)},m(r,n){ue(e,r,n),l=!0},p:ne,i(r){l||(F(e.$$.fragment,r),l=!0)},o(r){J(e.$$.fragment,r),l=!1},d(r){fe(e,r)}}}function Yl(t){let e,l;return e=new Ct({props:{reason:"ownership"}}),{c(){oe(e.$$.fragment)},l(r){ae(e.$$.fragment,r)},m(r,n){ue(e,r,n),l=!0},p:ne,i(r){l||(F(e.$$.fragment,r),l=!0)},o(r){J(e.$$.fragment,r),l=!1},d(r){fe(e,r)}}}function Hl(t){let e,l,r,n;return e=new jl({props:{list:t[0],entries:t[1]}}),r=new Cl({props:{entries:t[1],list:t[0],dragged:t[5]}}),{c(){oe(e.$$.fragment),l=V(),oe(r.$$.fragment)},l(s){ae(e.$$.fragment,s),l=G(s),ae(r.$$.fragment,s)},m(s,u){ue(e,s,u),N(s,l,u),ue(r,s,u),n=!0},p(s,u){const a={};u&1&&(a.list=s[0]),u&2&&(a.entries=s[1]),e.$set(a);const i={};u&2&&(i.entries=s[1]),u&1&&(i.list=s[0]),u&32&&(i.dragged=s[5]),r.$set(i)},i(s){n||(F(e.$$.fragment,s),F(r.$$.fragment,s),n=!0)},o(s){J(e.$$.fragment,s),J(r.$$.fragment,s),n=!1},d(s){s&&_(l),fe(e,s),fe(r,s)}}}function Rl(t){let e,l,r,n;const s=[Pl,Ol],u=[];function a(i,o){return i[0]&&i[3]?0:i[3]===null?1:-1}return~(e=a(t))&&(l=u[e]=s[e](t)),{c(){l&&l.c(),r=de()},l(i){l&&l.l(i),r=de()},m(i,o){~e&&u[e].m(i,o),N(i,r,o),n=!0},p(i,[o]){let f=e;e=a(i),e===f?~e&&u[e].p(i,o):(l&&(Ee(),J(u[f],1,1,()=>{u[f]=null}),Ie()),~e?(l=u[e],l?l.p(i,o):(l=u[e]=s[e](i),l.c()),F(l,1),l.m(r.parentNode,r)):l=null)},i(i){n||(F(l),n=!0)},o(i){J(l),n=!1},d(i){i&&_(r),~e&&u[e].d(i)}}}function Al(t,e,l){let r,n,s,u;te(t,Fe,f=>l(1,r=f)),te(t,We,f=>l(3,n=f)),te(t,Tt,f=>l(4,s=f)),te(t,_e,f=>l(5,u=f));let{data:a}=e,i,o;return t.$$set=f=>{"data"in f&&l(6,a=f.data)},t.$$.update=()=>{t.$$.dirty&65&&a.dbList&&(l(0,i=a.dbList),l(2,o=i.tiers||[]),Fe.set(a.dbList.entries)),t.$$.dirty&2&&Ht.set(r.length>0?r[0].backdrop_url:null)},[i,r,o,n,s,u,a]}class Ql extends Pe{constructor(e){super(),Ve(this,e,Al,Rl,Oe,{data:6})}}export{Ql as component,Wl as universal};
